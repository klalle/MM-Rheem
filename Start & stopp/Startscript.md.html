<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/monokai.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/go.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<style>
	img { max-width:900px; }
	.codeblock { 
	background: #B0B0B0; padding:1px 10px 0px 10px; border-radius: 5px; overflow-x:auto; 
	}
	code {
 font-family: monospace; font-size: inherit; color: #4f4f4a !important;
	}
	.inlineCode {
 font-family: monospace; font-size: inherit; 
	}
</style>
</head>
<body style="background: #F0F0F0;">
<div style="margin: 0 auto; width:1380px;  position: relative;" >
<div style="width:1000px; padding:20px; margin:0px; z-index: 5; text-align:left; background-color: #DCDCDC; border-radius: 5px; position:absolute; top:0; left:340px;">
<h1>Startscript</h1>
<pre class="codeblock"><code style="tab-size: 4;" class="bash codeblock">bash
#skapa ett startscript: 
startMagicMirror.sh
#klistra in nedan, gör sedan exekverbar: 
sudo chmod +x ./startMagicMirror.sh

#!/bin/bash

# sätt på och rotera skärmen:
# X11
DISPLAY=:0 xrandr --output HDMI-1 --auto --rotate left

# if using Wayland:
#export WAYLAND_DISPLAY=wayland-0 #1
#export XDG_RUNTIME_DIR=/run/user/$(id -u)
#export G_SLICE=always-malloc
#wlr-randr --output HDMI-A-1 --on  --transform 90

# Kolla om argumentet &quot;live&quot; finns
if [[ &quot;$1&quot; == &quot;live&quot; ]]; then
    DRYRUN=&quot;&quot;
    echo &quot;Live sync påbörjas – filer kommer skrivas och raderas.&quot;
elsenan
    DRYRUN=&quot;--dry-run&quot;
    echo &quot;Dry-run – inga filer kommer att ändras.&quot;
fi

# Var noga med hur du sätter upp rclone sync då det finns risk att man deletar filer remote!!! börja med dryrun för att se vad som händer! 
rclone sync dropbox:Bilder /home/kalle/Pictures/ \
  --include &quot;/{2017,2018,2019}/{album,almanacka}/*.jpg&quot; \
  --include &quot;/{2017,2018,2019}/{album,almanacka}/excludeImages.txt&quot; \
  --include &quot;/202[0-9]/*.jpg&quot; \
  --include &quot;/202[0-9]/excludeImages.txt&quot; \
  --filter &quot;- *&quot; \
  --ignore-case \
  --delete-excluded \
  --ignore-checksum \
  --size-only \
  -P \
  $DRYRUN \
  || true

#jag kör igång servern headless då default browser (chromium/electron) inte alls klarade zoom lika smooth: 
cd /home/pi/MagicMirror &amp;&amp; npm run server &gt;/dev/null 2&gt;&amp;1 &gt; /home/pi/Scripts/node_mm_$(date +%Y-%m-%d_%H-%M-%S).log 2&gt;&amp;1 &amp;
SERVER_PID=$! # Spara process-ID för servern

echo -n &quot;Väntar på att node-servern ska starta&quot;
while ! curl -s -f http://localhost:8080 &gt; /dev/null
do
    echo -n &quot;.&quot;
    # Kontrollera om serverprocessen har dött
    if ! kill -0 $SERVER_PID &gt; /dev/null 2&gt;&amp;1; then
        echo &quot;MagicMirror-servern verkar ha kraschat vid start.&quot;
        exit 1
    fi
    sleep 1
done
echo &quot;&quot;
echo &quot;Servern är uppe! Startar Firefox...&quot;

export DISPLAY=:0 #tells the remote computer to send its graphical output to your local machine display if run from ssh

MOZ_DISABLE_RDD_SANDBOX=1 firefox --kiosk --private-window http://localhost:8080 &amp;

</pre></code>
</div>
<div style="width:345px; padding-top: 20px;; position:absolute; top:0; left:0; overflow:auto;">
	<iframe src="../treeview.html" width="340px" frameBorder="0" height="900px"></iframe>
</div>
</div>
</body>
</html>
